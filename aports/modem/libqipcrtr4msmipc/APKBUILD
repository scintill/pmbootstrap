pkgname=libqipcrtr4msmipc
pkgver=0.1_git20180304
pkgrel=0
pkgdesc="LD_PRELOADable library to emulate AF_QIPCRTR socket on devices with only AF_MSM_IPC"
url="https://github.com/scintill/libqipcrtr4msmipc"
arch="all"
license="GPL-3.0-or-later"
makedepends="msmipc-dev"
_commit="b931c24aec90e135c40c270375afedefe3ffd170"
source="src.tgz::https://github.com/scintill/libqipcrtr4msmipc/archive/"$_commit".tar.gz"
options="!check"
builddir="$srcdir/libqipcrtr4msmipc-$_commit"

build() {
	cd "$builddir"
	make C_INCLUDE_PATH=/usr/src/msmipc-dev/include
}

package() {
	install -Dm644 "$builddir"/libqipcrtr4msmipc.so "$pkgdir"/usr/lib/preload/libqipcrtr4msmipc.so
}

sha512sums="f13898eb359f908adebfe3a68a135906ac37e3a739d0bb37703a9cd4fe50dc45e0f1b5dd839ec4b51c7cdb5a69839ed2fd2c6031895436f242db578ddf12b0d5  src.tgz"
